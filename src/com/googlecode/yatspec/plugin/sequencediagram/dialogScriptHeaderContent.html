<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.7/themes/base/jquery-ui.css" type="text/css" media="all"/>
<link rel="stylesheet" href="http://static.jquery.com/ui/css/demo-docs-theme/ui.theme.css" type="text/css" media="all"/>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.7/jquery-ui.min.js" type="text/javascript"></script>

<script type="text/javascript">

    var isAssociatedWithASequenceDiagramMessage = function(scenario, logKeyNode) {
        logKeyId = logKeyNode.getAttribute("logkey")
        isAssociated = false;
        scenario.find(".sequence_diagram_clickable").each(function() {
            if (this.getAttribute("sequence_diagram_message_id") == logKeyId) {
                isAssociated = true;
            }
        });

        return isAssociated;
    }

    $(document).ready(function () {
        $(".scenario").each(function() {
            scenario = $(this);
            scenario.children(".logKey").each(function() {
                if (isAssociatedWithASequenceDiagramMessage(scenario, this)) {
                    $(this).toggle()
                }
            })
        });


        $(".SvgWrapper").toggleClass("hide");

        var messagePayloadDialogs = {};

        var initRun = false;

        $(".sequence_diagram_clickable").click(function() {

            if (!initRun) {
                $(".sequence_diagram_clickable").each(function() {
                    capturedInputAndOutputsName = $(this).children("text").text();
                    sequenceDiagramMessageId = $(this).attr("sequence_diagram_message_id");

                    myScenario = $(this).parents(".scenario");

                    dialogContent = myScenario.children().filter(function() {
                        return this.tagName == "H3" && sequenceDiagramMessageId == $(this).attr("logkey");

                    }).next("div")

                    messagePayloadDialogs[sequenceDiagramMessageId] = dialogContent.dialog({title:capturedInputAndOutputsName,minWidth: 800,stack:false,closeOnEscape:true, autoOpen:false });
                })
                initRun = true;
            }

            sequenceDiagramMessageId = "" + $(this).attr("sequence_diagram_message_id");
            messagePayloadDialogs[sequenceDiagramMessageId].dialog("open")
        })
    })
</script>
